" Load seawead color scheme
colorscheme seaweed

" map gM to mail a link to this page
map gM :javascript open("mailto:?SUBJECT=" + escape(document.title) + "&BODY=" + escape(document.getElementById("urlbar").value))<CR>
nmap gM :javascript open("mailto:?SUBJECT=" + escape(document.title) + "&BODY=" + escape(document.getElementById("urlbar").value))<CR>
vmap gM :javascript open("mailto:?SUBJECT=" + escape(document.title) + "&BODY=" + escape(document.getElementById("urlbar").value))<CR>

" Activate flashblock
"set flashblock

" Always show tab numbers I hate counting
set guioptions=n

" set the runtimepath
set runtimepath=/home/wael/.vimperator

" Function used to toggle toolbars
js << EOF
    toggle_element = function (name) {
        document.getElementById(name).collapsed ^= 1;
    }
EOF

" Disable extensions compatibility checking, allowing me to install extensions for older firefox version
set! extensions.checkCompatibility=false
" Vimperator 2.0 only:
style! -n addons-version addons.mozilla.org << EOF
    /* Show the install button for extensions for older versions of Firefox */
    .install-container { display: block !important; }
    .exp-loggedout > .install-button { display: none !important }
EOF
" And this will disable the install-dialog delay
set! security.dialog_enable_delay=0

" To make sure that "Y"anking results in the same thing as using Edit->Copy
js <<EOF
mappings.addUserMap([modes.NORMAL], ["Y"],
    "Yank the currently selected text",
    function () {
        buffer.getCurrentWord();
        events.feedkeys("<C-v>" + (/^Mac/.test(navigator.platform) ? "<M-c>" : "<C-c>"), true);
        setTimeout( function () {
          liberator.echo("Yanked " + util.readFromClipboard(), commandline.FORCE_SINGLELINE);
        }, 20 );
    });
EOF

" Change your completion settings if you miss Firefox's AwesomeBar
set complete=l
set wildoptions=auto

" Having to press Shift to go back is irretating, use gb instead of gT
noremap gb gT

" Quickly disable / enable vimperator
js << EOF
	disable = function () {
		liberator.execute(':set guioptions=Tnbrm showtabline=1');
		modes.passAllKeys = true;
	}
EOF
command! disable javascript disable()
command! enable set guioptions=n showtabline=1

" replace security button with the site identification button
javascript <<EOF
    (function () {
        liberator.log("Moving the identity box to the statusbar...")
        let panel = document.createElement("statusbarpanel");
        let box = document.getElementById("identity-box");
        panel.appendChild(box.parentNode.removeChild(box));
        panel.maxHeight = "16px";
        document.getElementById("status-bar").insertBefore(panel, document.getElementById("security-button"));
        document.getElementById("security-button").collapsed = true;
    })();
EOF

" Custom keymaps

" Open all commands in a newtab
set newtab=all

" vim: set ft=vimperator:
