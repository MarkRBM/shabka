# Upon starting be at home directory
chdir ~

# Disable startup_message
startup_message off

exec xsetroot -cursor_name left_ptr

# Banish the mouse to the lower right corner of the screen.
addhook key banish

escape C-less

bind grave exec xset dpms force off
bind o exec ratpoison -c 'echo "Launching Opera"' && exec opera
bind C-o exec ratpoison -c 'echo "Launching Sopera"' && exec sopera
bind c exec ratpoison -c 'echo "Launching urxvt"' && exec urxvt
bind C-c exec ratpoison -c 'echo "Launching urxvt"' && exec urxvt
definekey top M-Return exec ratpoison -c 'echo "Launching urxvt"' && exec urxvt

bind Escape abort

bind x exec ratpoison -c 'echo "Launching gmrun"' && exec gmrun
bind C-x exec ratpoison -c 'echo "Launching gmrun"' && exec gmrun

# make "sticky" frames
bind d dedicate
bind C-d dedicate

bind u undo

bind B exec ratpoison -c "echo $($HOME/.ratpoison/battery)"
bind T exec ratpoison -c "echo $($HOME/.ratpoison/temp)"

# fdump & frestore
alias fdump_1 exec ratpoison -c fdump > .ratpoison-fdump-1
alias fdump_2 exec ratpoison -c fdump > .ratpoison-fdump-2
alias fdump_3 exec ratpoison -c fdump > .ratpoison-fdump-3
alias fdump_4 exec ratpoison -c fdump > .ratpoison-fdump-4
alias frestore_1 exec ratpoison -c "frestore `< .ratpoison-fdump-1`"
alias frestore_2 exec ratpoison -c "frestore `< .ratpoison-fdump-2`"
alias frestore_3 exec ratpoison -c "frestore `< .ratpoison-fdump-3`"
alias frestore_4 exec ratpoison -c "frestore `< .ratpoison-fdump-4`"

bind F1 fdump_1
bind F2 fdump_2
bind F3 fdump_3
bind F4 fdump_4
bind C-F1 frestore_1
bind C-F2 frestore_2
bind C-F3 frestore_3
bind C-F4 frestore_4

#  Bind m to ratmenu
newkmap tmenus
definekey tmenus m exec ~/.ratmenu/main
definekey tmenus p exec ~/.ratmenu/player
bind m readkey tmenus
#
newkmap tgroup
definekey tgroup n gnew
definekey tgroup d gdelete
definekey tgroup m gmove
definekey tgroup r gmerge
definekey tgroup g groups
definekey tgroup Right exec ~/.ratpoison/gnext
definekey tgroup Left exec ~/.ratpoison/gprev
#
bind g readkey tgroup
addhook switchgroup groups

#rudeness is a bitwise or of the following values:
# 1    Transient windows may raise.
# 2    Normal windows may raise.
# 4    New transient windows end up in the foreground.
# 8    New normal windows end up in the foreground.
rudeness 13
warp off

set winname name
set wingravity center
set transgravity center
set bargravity center
set border 1
set barborder 1
set padding 0 0 0 0
set barpadding 1 1
set inputwidth 600
set font -artwiz-snap-*
set bgcolor black
set fgcolor white

# Gimp Layout helper
bind C-g exec ratpoison -c 'hsplit 288' -c 'fselect 1' -c 'exec /usr/bin/gimp' && sleep 5 && ratpoison -c 'dedicate 1'

# Printscreen!
definekey top Print exec import -window root ~/ss-`date +%Y%m%d%H%M%S`.png

# Date/Time
bind a exec ratpoison -c "echo `figlet $(date +'%H : %M : %S')`"
bind C-a exec ratpoison -d :0.0 -c "echo `date +'%H:%M:%S - %A %n    %D - %B'`  `cal | tail -n +2 | sed -e 's/^Su/\n\n Su/' -e 's/.*/ & /' -e \"s/\ $(date +%e)\ /\<$(date +%e)\>/\"`"


# Volume
definekey top XF86AudioRaiseVolume exec ~/.ratpoison/ratvolume PCM 3%+
definekey top XF86AudioMute exec ~/.ratpoison/ratvolume Front switch
definekey top XF86AudioLowerVolume exec ~/.ratpoison/ratvolume PCM 3%-
definekey top S-XF86AudioRaiseVolume exec ~/.ratpoison/ratvolume Front 3%+
definekey top S-XF86AudioLowerVolume exec ~/.ratpoison/ratvolume Front 3%-

# Multimedia Keys
definekey top S-XF86AudioNext exec mpc seek +00:00:05 >/dev/null
definekey top S-XF86AudioPrev exec mpc seek -00:00:05 >/dev/null
definekey top C-XF86AudioRaiseVolume exec mpc volume +3 >/dev/null
definekey top C-XF86AudioLowerVolume exec mpc volume -3 >/dev/null
definekey top XF86AudioNext exec mpc next >/dev/null && ratpoison -c "echo $(mpc --format '[[%artist% - ]%title%]|[%file%] #| %time%' | head -n1)"
definekey top XF86AudioPrev exec mpc prev >/dev/null && ratpoison -c "echo $(mpc --format '[[%artist% - ]%title%]|[%file%] #| %time%' | head -n1)"
definekey top XF86AudioStop exec mpc stop >/dev/null
definekey top S-XF86AudioStop exec ratpoison -c "echo $(mpc --format '[[%artist% - ]%title%]|[%file%] #| %time%' | head -n1)"
definekey top XF86AudioPlay exec mpc toggle >/dev/null && ratpoison -c "echo $(mpc --format '[[%artist% - ]%title%]|[%file%] #| %time%' | head -n1)"
definekey top S-XF86AudioPlay exec mpc pause >/dev/null

# Focus
definekey top M-Tab next
definekey top M-ISO_Left_Tab prev
bind BackSpace prev

# Workspaces
#exec rpws init 4
#definekey top M-F1 exec rpws 1
#definekey top M-F2 exec rpws 2
#definekey top M-F3 exec rpws 3
#definekey top M-F4 exec rpws 4

# Frame focus/swapping
#definekey H-Left    focusleft
#definekey H-Down    focusdown
#definekey H-Up      focusup
#definekey H-Right   focusright
#definekey C-Left  exec ratpoison -i -c "select -" -c focusleft -c other -c focuslast -c other
#definekey C-Down  exec ratpoison -i -c "select -" -c focusdown -c other -c focuslast -c other
#definekey C-Up    exec ratpoison -i -c "select -" -c focusup -c other -c focuslast -c other
#definekey C-Right exec ratpoison -i -c "select -" -c focusright -c other -c focuslast -c other

#addhook deletewindow exec [ $(ratpoison -c windows | wc -l) -eq 1 ] && ratpoison -c only -c other
