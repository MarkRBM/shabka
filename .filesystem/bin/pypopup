#!/usr/bin/env python
#
# vim:ft=python:fenc=UTF-8:ts=4:sts=4:sw=4:expandtab:foldmethod=marker:foldlevel=0:
#
# $Id: pypopup 1247 2008-07-14 08:05:52Z wael $

import sys
from optparse import OptionParser

try:
    import pygtk
    pygtk.require20()
    import gtk
except ImportError:
    print "You need to install dev-python/pygtk"
    sys.exit(1)

def popup(title, text, width=-1, height=-1, textsize=14):
    dlg = gtk.Dialog(title, None, gtk.DIALOG_MODAL,
            (gtk.STOCK_OK, gtk.RESPONSE_ACCEPT))

    lbl = gtk.Label()
    lbl.set_line_wrap(True)
    lbl.set_markup('<span size="%s">%s</span>' % (textsize*1000, text))
    dlg.vbox.add(lbl)
    dlg.set_geometry_hints(dlg, max_width=width, min_width=width,
            max_height=height, min_height=height)

    dlg.show_all()
    response = dlg.run()

    dlg.hide()
    dlg.destroy()

if __name__ == '__main__':
    parser = OptionParser("usage: %prog [options] message",
                          description = "Display a pygtk popup message")
    parser.add_option('-W', '--width', type="int", default=-1, help="the width of the popup")
    parser.add_option('-H', '--height', type="int", default=-1, help="the height of the popup")
    parser.add_option('-f', '--fontsize', type="int", default=12, help="the size of the popup font")
    parser.add_option('-t', '--title', type="string", default="Popup Message", help="the title of the popup")

    (opts, args) = parser.parse_args()

    if len(args) < 1:
        parser.print_help(sys.stderr)
        sys.exit(0)

    popup(opts.title, ' '.join(args), opts.width, opts.height, opts.fontsize)
